$.fn.liteUpload=function(a){var b,c,d,e;c={script:null,maxSize:null,minSize:null,allowedFileTypes:null,onClick:function(a){return!0},onBefore:function(a){},onSelectFiles:function(a){return!0},onProgress:function(a,b,c){},onEnd:function(a){},onSuccess:function(a,b,c){},onFail:function(a,b){},onError:function(a,b){}},d=$.extend(c,a),e=function(a){var b;a.lengthComputable&&(b=Number((100*a.loaded/a.total).toFixed(2)),d.onProgress(b,d.fileActual,d.fileTotal),d.fileActual===d.fileTotal&&d.onEnd(d.button))},this.each(function(a){var b,c;b=$(this),"absolute"!==b.css("position")&&"hidden"!==b.css("visibility")&&(b.css("position","absolute"),b.css("visibility","hidden"),c=b.next("a"),c.on("click",function(a){a.preventDefault(),d.onClick($(this))&&$(this).prev('input[type="file"]').trigger("click")}))}),b=function(a){var b,c;for(c=0;c<a.length;){if(b=a[c],d.maxSize&&b.size>1024*d.maxSize)return"max size exceded";if(d.minSize&&b.size<1024*d.minSize)return"min is "+1024*d.minSize;c++}},this.change(function(){var a,c,f,g,h;if(a=$(this),d.fileActual=0,d.fileTotal=0,c=a.next("a"),d.button=c,d.onBefore(c),d.onSelectFiles(this.files))for(b(this.files),d.fileActual=1,h=0;h<this.files.length;)d.fileTotal++,g=new FormData,f=this.files[h],g.append(a.attr("name")+"[]",f),g.append("name_image",this.name),g.append("position",h),$.ajaxQueue({url:d.script,type:"POST",data:g,processData:!1,contentType:!1,xhr:function(){var a;return a=$.ajaxSettings.xhr(),a.upload&&a.upload.addEventListener("progress",e,!1),a},cache:!1,success:function(a){d.onSuccess(a,d.fileActual,c),d.fileActual++},fail:function(a){d.onFail(a,c)},error:function(a){d.onError(a.statusText,c)}}),h+=1})};