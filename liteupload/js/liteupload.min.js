$.fn.liteUpload=function(a){var b,c,d;b={script:null,onClick:function(a){return!0},onBefore:function(a){},onSelectFiles:function(a){},onProgress:function(a,b,c){},onEnd:function(a){},onSuccess:function(a,b,c){},onFail:function(a,b){},onError:function(a,b){}},c=$.extend(b,a),d=function(a){var b;a.lengthComputable&&(b=Number((100*a.loaded/a.total).toFixed(2)),c.onProgress(b,c.fileActual,c.fileTotal),c.fileActual===c.fileTotal&&c.onEnd(c.button))},this.each(function(a){var b,d;b=$(this),b.css("position","absolute"),b.css("visibility","hidden"),d=b.next("a"),d.on("click",function(a){a.preventDefault(),c.onClick($(this))&&$(this).prev('input[type="file"]').trigger("click")})}),this.change(function(){var a,b,e,f,g;if(a=$(this),c.fileActual=0,c.fileTotal=0,b=a.next("a"),c.button=b,c.onBefore(b),c.onSelectFiles(this.files))for(c.fileActual=1,g=0;g<this.files.length;)c.fileTotal++,f=new FormData,e=this.files[g],f.append(a.attr("name")+"[]",e),f.append("name_image",this.name),f.append("position",g),$.ajaxQueue({url:c.script,type:"POST",data:f,processData:!1,contentType:!1,xhr:function(){var a;return a=$.ajaxSettings.xhr(),a.upload&&a.upload.addEventListener("progress",d,!1),a},cache:!1,success:function(a){var d;d=jQuery.parseJSON(a),c.onSuccess(d,c.fileActual,b),c.fileActual++},fail:function(a){c.onFail(a,b)},error:function(a){c.onError(a.statusText,b)}}),g+=1})};